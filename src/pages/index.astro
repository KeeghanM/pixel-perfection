---
import Layout from '../layouts/Layout.astro'
import NavBar from '../components/nav-bar/nav-bar.astro'
import Hero from '../components/hero/hero.astro'
import HowItWorks from '../components/how-it-works/how-it-works.astro'
import Features from '../components/features/features.astro'
---

<Layout
  title='PixelPerfection - Training and practice challenges for devs'
  description='Want to improve your attention to detail? Struggle align designs perfectly to a design? Or instead, want to prove you can! Test your mettle with PixelPerfection.'
>
  <NavBar />
  <Hero />
  <HowItWorks />
  <Features />
</Layout>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  }

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible')
      }
    })
  }, observerOptions)

  // Observe all fade-in elements
  document.querySelectorAll('.fade-in').forEach((el) => {
    observer.observe(el)
  })

  // Navigation background on scroll
  window.addEventListener('scroll', () => {
    const nav = document.querySelector('.nav') as HTMLElement
    if (!nav) return

    if (window.scrollY > 100) {
      nav.style.background = 'rgba(10, 10, 10, 0.95)'
    } else {
      nav.style.background = 'var(--glass-bg)'
    }
  })
</script>
